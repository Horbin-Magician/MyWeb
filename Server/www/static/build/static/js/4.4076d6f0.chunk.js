(this["webpackJsonpmy-web"]=this["webpackJsonpmy-web"]||[]).push([[4],{314:function(t,e,n){},315:function(t,e,n){},325:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return P}));var a=n(39),i=n(40),r=n(42),s=n(41),c=n(0),o=n.n(c),u=n(22),l=n(121),d=n.n(l),p=n(134),j=(n(302),n(303)),h=(n(81),n(38)),f=(n(128),n(52)),b=(n(172),n(104)),O=(n(127),n(82)),v=n(329),y=n(328),m=n(129),x=n(53),g=(n(171),n(120)),k=n(8),S=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).input=o.a.createRef(),t.onExit=function(){t.props.editFavType(t.input.current.state.value),t.input.current.setState({value:""})},t}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(){this.input.current.focus()}},{key:"render",value:function(){var t=this;return Object(k.jsx)(g.a,{ref:this.input,onBlur:this.onExit,onPressEnter:function(){t.input.current.blur()}})}}]),n}(c.Component),M=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={onEdit:!1},t.editFavType=function(e){t.props.editFavType(t.props.title,e),t.setState({onEdit:!1})},t.onDoubleClick=function(){t.setState({onEdit:!0})},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.state.onEdit,e=this.props.title;return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{style:{display:t?"none":"block"},onDoubleClick:this.onDoubleClick,children:e}),Object(k.jsx)("div",{style:{display:t?"block":"none"},children:Object(k.jsx)(S,{editFavType:this.editFavType})})]})}}]),n}(c.Component),C=j.a.Sider,T=O.a.confirm,w=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={theme:"light",menuList:[],onAddStatus:!1,selectedMenu:"",dragingMenu:{},targetMenu:{}},t.setSelectedMenu=function(e){t.setState({selectedMenu:e}),t.props.onFavTypeChange(e)},t.updateMenuList=function(){Object(m.d)().then((function(e){var n=t.state.selectedMenu,a=e.data;t.setState({menuList:a}),n&&a.find((function(t){return t.title===n}))||!a[0]||t.setSelectedMenu(a[0].title)}))},t.getRankFromTitle=function(e){return t.state.menuList.find((function(t){return t.title===e})).rank},t.onDragStart=function(e){var n=e.target.childNodes[0].childNodes[0].innerHTML;t.setState({dragingMenu:n})},t.onDropOver=function(e){e.preventDefault();var n=t.state.dragingMenu,a=e.target.innerHTML;n!==a&&t.setState({targetMenu:a})},t.onDrop=function(e){var n=t.state,a=n.targetMenu,i=n.dragingMenu;Object(m.f)(i,a).then((function(e){"0"===e.status&&t.updateMenuList()})),t.setState({targetMenu:{},dragingMenu:{}})},t.getMenuNodes=function(e){var n=t.state,a=n.targetMenu,i=n.dragingMenu;return e.map((function(e){var n={};if(a===e.title){var r=t.getRankFromTitle(a);n=t.getRankFromTitle(i)>r?{borderTop:"2px dashed #1890ff"}:{borderBottom:"2px dashed #1890ff"}}return Object(k.jsx)(b.a.Item,{style:n,draggable:!0,onDragStart:t.onDragStart,onDragOver:t.onDropOver,onDrop:t.onDrop,children:Object(k.jsx)(M,{title:e.title,editFavType:t.editFavType})},e.title)}))},t.onAdd=function(){return t.setState({onAddStatus:!0})},t.onDel=function(){T({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664?",onOk:function(){Object(m.b)(t.state.selectedMenu).then((function(e){"0"===e.status&&(f.b.success("\u5220\u9664\u6210\u529f\uff01"),t.updateMenuList())}))}})},t.onSelect=function(e){return t.setSelectedMenu(e.key)},t.editFavType=function(e,n){t.state.menuList.find((function(t){return t.title===n}))?f.b.error("\u5df2\u6709\u76f8\u540c\u7c7b\u522b\uff0c\u8bf7\u66f4\u6362\u4e00\u4e2a\uff01"):n&&Object(m.h)(n,void 0,e).then((function(a){"0"===a.status&&(f.b.success("\u4fee\u6539\u6210\u529f\uff01"),t.updateMenuList(),e===t.state.selectedMenu&&t.setState({selectedMenu:n}))}))},t.addFavType=function(e){var n=t.state.menuList;if(n.find((function(t){return t.title===e})))f.b.error("\u5df2\u6709\u76f8\u540c\u7c7b\u522b\uff0c\u8bf7\u66f4\u6362\u4e00\u4e2a\uff01");else if(e){var a=n.length;Object(m.h)(e,a).then((function(i){"0"===i.status&&(f.b.success("\u6dfb\u52a0\u6210\u529f\uff01"),n.push({rank:a,title:e}),t.setState({menuList:n}))}))}t.setState({onAddStatus:!1})},t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.updateMenuList()}},{key:"render",value:function(){var t=this.state,e=t.menuList,n=t.onAddStatus,a=t.selectedMenu,i=this.getMenuNodes(e);return Object(k.jsxs)(C,{width:"150",className:"favourites-sider",theme:this.state.theme,children:[Object(k.jsxs)(b.a,{className:"favourites-sider-menu",mode:"inline",selectedKeys:[a],onSelect:this.onSelect,children:[i,Object(k.jsx)(b.a.Item,{disabled:!0,style:{display:n?"block":"none"},children:Object(k.jsx)(S,{editFavType:this.addFavType})},"new-menu")]}),Object(k.jsxs)("div",{style:Object(x.a)()?{display:"block"}:{display:"none"},children:[Object(k.jsx)(h.a,{type:"link",style:{width:"50%"},onClick:this.onAdd,children:Object(k.jsx)(v.a,{style:{fontSize:"20px"}})}),Object(k.jsx)(h.a,{type:"link",style:{width:"50%"},onClick:this.onDel,children:Object(k.jsx)(y.a,{style:{fontSize:"20px"}})})]})]})}}]),n}(c.Component),F=(n(304),n(305)),L=(n(173),n(79)),D=(n(169),n(132)),R=(n(170),n(118)),A=(n(320),n(316)),E=n(319),N=(n(322),n(318)),I=(n(321),n(317)),U=n(327),q=n(326),z=(n(314),I.a.Meta),H=O.a.confirm,B=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).onEdit=function(){var e=t.props,n=e.url,a=e.title,i=e.description,r=e.type,s=e.rank;t.props.onEdit(n,a,i,r,s)},t.onDel=function(){H({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664?",onOk:function(){Object(m.a)(t.props.url).then((function(e){"0"===e.status&&(f.b.success("\u5220\u9664\u6210\u529f\uff01"),t.props.update())}))}})},t.onRankChange=function(e){var n=t.props.url;Object(m.g)(n,void 0,void 0,e)},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props,e=t.url,n=t.title,a=t.description,i=t.rank;return Object(k.jsx)(I.a,{style:{maxWidth:"550px",minWidth:"200px"},headStyle:{minHeight:"36px"},actions:Object(x.a)()?[Object(k.jsx)(U.a,{onClick:this.onEdit},"edit"),Object(k.jsx)(y.a,{onClick:this.onDel},"delete")]:[],title:Object(k.jsx)(F.a,{disabled:!Object(x.a)(),defaultValue:i,onChange:this.onRankChange,style:{width:"100%",textAlign:"center"}}),hoverable:!0,children:Object(k.jsx)(z,{avatar:Object(k.jsx)(N.a,{size:50,shape:"square",src:e+"favicon.ico",icon:Object(k.jsx)(q.a,{})}),title:n,description:a,onClick:function(){window.open(e)}})})}}]),n}(c.Component),J=A.a.Option,V=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={showStatus:0},t.formRef=o.a.createRef(),t.oldUrl="",t.getCardNodes=function(e){return e.map((function(e){return Object(k.jsx)(R.a,{children:Object(k.jsx)(B,{url:e.url,title:e.title,description:e.description,type:e.type,rank:e.rank,update:t.props.update,onEdit:t.onEdit})},e.url)}))},t.updateItem=function(){t.formRef.current.validateFields().then((function(e){var n=e.url,a=e.title,i=e.description,r=e.type,s=e.rank;Object(m.g)(n,r,a,s,i,t.oldUrl).then((function(e){"0"===e.status&&(t.props.update(),t.afterUpdate(),f.b.success("\u6dfb\u52a0\u6210\u529f\uff01"))}))})).catch((function(t){return f.b.error("\u8bf7\u6b63\u786e\u586b\u5199\u4fe1\u606f\uff01")}))},t.afterUpdate=function(){t.setState({showStatus:0}),t.formRef.current.resetFields(),t.oldUrl=""},t.onEdit=function(e,n,a,i,r){t.oldUrl=e,Object(m.d)().then((function(s){var c=s.data.map((function(t){return Object(k.jsx)(J,{value:t.title,children:t.title},t.title)}));t.formRef.current.setFieldsValue({url:e,title:n,description:a,type:i,rank:r}),t.setState({typeOptions:c,showStatus:1})}))},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.props.itemList,n=this.getCardNodes(e);return Object(k.jsxs)("div",{children:[Object(k.jsxs)(D.a,{gutter:[16,24],children:[n,Object(k.jsx)("div",{style:Object(x.a)()?{display:"block"}:{display:"none"},children:Object(k.jsx)(h.a,{icon:Object(k.jsx)(E.a,{style:{fontSize:"50px",color:"#C0C0C0"}}),style:{height:"180px",width:"180px"},onClick:function(){t.onEdit("","","",t.props.favType,3)}})})]}),Object(k.jsx)(O.a,{forceRender:!0,title:"\u6536\u85cf\u9879\u4fe1\u606f",visible:1===this.state.showStatus,onOk:function(){t.updateItem()},onCancel:this.afterAdd,children:Object(k.jsxs)(L.a,{ref:this.formRef,children:[Object(k.jsx)(L.a.Item,{name:"url",rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}],children:Object(k.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165URL"})}),Object(k.jsx)(L.a.Item,{name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],children:Object(k.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"})}),Object(k.jsx)(L.a.Item,{name:"description",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f8\u5173\u63cf\u8ff0"}],children:Object(k.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165\u76f8\u5173\u63cf\u8ff0"})}),Object(k.jsx)(L.a.Item,{name:"type",children:Object(k.jsx)(A.a,{children:this.state.typeOptions})}),Object(k.jsx)(L.a.Item,{name:"rank",children:Object(k.jsx)(F.a,{style:{margin:"auto 0"}})})]})})]})}}]),n}(c.Component),W=(n(315),j.a.Content),K=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={theme:"light",itemList:[]},t.onFavTypeChange=function(){var e=Object(p.a)(d.a.mark((function e(n){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.c)(n);case 2:a=e.sent,i=a.data,t.setState({itemList:i,favType:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.state.favType;return Object(k.jsxs)(j.a,{className:"favourites",children:[Object(k.jsx)(w,{onFavTypeChange:this.onFavTypeChange}),Object(k.jsx)(j.a,{children:Object(k.jsx)(W,{className:"favourites-content",children:Object(k.jsx)(V,{itemList:this.state.itemList,favType:this.state.favType,update:function(){return t.onFavTypeChange(e)}})})})]})}}]),n}(c.Component),P=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:"/tools/favorites",component:K}),Object(k.jsx)(u.a,{to:"/"})]})})}}]),n}(c.Component)}}]);
//# sourceMappingURL=4.4076d6f0.chunk.js.map
(this["webpackJsonpmy-web"]=this["webpackJsonpmy-web"]||[]).push([[5],{172:function(e,t,n){},177:function(e,t,n){"use strict";n(169);var a=n(173),i=(n(161),n(160)),r=(n(170),n(174)),s=(n(163),n(164)),c=n(40),o=n(41),u=n(43),l=n(42),d=(n(178),n(191)),j=n(0),h=n(72),p=n(7),b=n(325),f=n(321),O=n(324),v=n(323),m=n(311),x=(n(180),n(190)),y=(n(171),n(175)),g=n(181),k=n.n(g),w=n(182),S=n(322),C=n(67),M=n(13),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).onFinish=function(){var t=Object(w.a)(k.a.mark((function t(n){var a,i,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.username,i=n.password,t.next=3,Object(C.c)(a,i);case 3:(r=t.sent)&&"0"===r.status&&e.props.switchShow();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"render",value:function(){return Object(M.jsx)(s.a,{title:"\u7528\u6237\u767b\u5f55",visible:this.props.showLogin,onCancel:this.props.switchShow,footer:null,children:Object(M.jsxs)(x.a,{name:"normal_login",footer:null,initialValues:{},onFinish:this.onFinish,children:[Object(M.jsx)(x.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{min:4,message:"\u7528\u6237\u540d\u6700\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-z0-9_*!]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u7531\u82f1\u6587\u3001\u6570\u5b57\u6216\u82f1\u6587\u5b57\u7b26_*!\u7ec4\u6210"}],children:Object(M.jsx)(y.a,{prefix:Object(M.jsx)(f.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})}),Object(M.jsx)(x.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"},{min:6,message:"\u5bc6\u7801\u6700\u5c116\u4f4d"},{max:16,message:"\u5bc6\u7801\u6700\u591a16\u4f4d"},{pattern:/^[a-zA-z0-9_*!]+$/,message:"\u5bc6\u7801\u5fc5\u987b\u7531\u82f1\u6587\u3001\u6570\u5b57\u6216\u82f1\u6587\u5b57\u7b26_*!\u7ec4\u6210"}],children:Object(M.jsx)(y.a,{prefix:Object(M.jsx)(S.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(M.jsx)(x.a.Item,{children:Object(M.jsx)(i.a,{style:{width:"100%"},type:"primary",htmlType:"submit",children:"\u767b\u5f55"})})]})})}}]),n}(j.Component),T=(n(172),d.a.SubMenu),F=d.a.Item,D=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={showLogin:!1},e.onUserClick=function(){Object(C.a)()?s.a.confirm({title:"\u662f\u5426\u786e\u8ba4\u6ce8\u9500\uff1f",onOk:function(){Object(C.d)(),e.forceUpdate()}}):e.switchLoginShow()},e.switchLoginShow=function(){return e.setState({showLogin:!e.state.showLogin})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.history.location.pathname.split("/"),t=""===e[e.length-1]?"home":e[e.length-1],n=Object(C.a)()?Object(M.jsx)(b.a,{}):Object(M.jsx)(f.a,{});return Object(M.jsxs)(a.a,{className:"header",children:[Object(M.jsx)(r.a,{children:Object(M.jsxs)(d.a,{className:"header-menu",mode:"horizontal",selectedKeys:[t],children:[Object(M.jsx)(F,{icon:Object(M.jsx)(O.a,{}),children:Object(M.jsx)(h.b,{to:"/",children:"\u9996\u9875"})},"home"),Object(M.jsx)(T,{title:"\u5c0f\u5de5\u5177",icon:Object(M.jsx)(v.a,{}),children:Object(M.jsx)(F,{children:Object(M.jsx)(h.b,{to:"/tools/favorites",children:"\u6536\u85cf\u5939"})},"favorites")},"tools"),Object(M.jsx)(F,{icon:Object(M.jsx)(m.a,{}),children:Object(M.jsx)(h.b,{to:"/about",children:"\u5173\u4e8e"})},"about")]})}),Object(M.jsx)(r.a,{children:Object(M.jsx)(i.a,{type:"primary",shape:"circle",onClick:this.onUserClick,children:n})}),Object(M.jsx)(L,{switchShow:this.switchLoginShow,showLogin:this.state.showLogin})]})}}]),n}(j.Component);t.a=Object(p.g)(D)},303:function(e,t,n){},304:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var a=n(40),i=n(41),r=n(43),s=n(42),c=n(0),o=n.n(c),u=n(7),l=n(177),d=n(181),j=n.n(d),h=n(182),p=(n(216),n(217)),b=(n(161),n(160)),f=(n(73),n(26)),O=(n(178),n(191)),v=(n(163),n(164)),m=n(320),x=n(319),y=n(75),g=n(67),k=(n(171),n(175)),w=n(13),S=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).input=o.a.createRef(),e.onExit=function(){e.props.editFavType(e.input.current.state.value),e.input.current.setState({value:""})},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(){this.input.current.focus()}},{key:"render",value:function(){var e=this;return Object(w.jsx)(k.a,{ref:this.input,onBlur:this.onExit,onPressEnter:function(){e.input.current.blur()}})}}]),n}(c.Component),C=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={onEdit:!1},e.editFavType=function(t){e.props.editFavType(e.props.title,t),e.setState({onEdit:!1})},e.onDoubleClick=function(){e.setState({onEdit:!0})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.onEdit,t=this.props.title;return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{style:{display:e?"none":"block"},onDoubleClick:this.onDoubleClick,children:t}),Object(w.jsx)("div",{style:{display:e?"block":"none"},children:Object(w.jsx)(S,{editFavType:this.editFavType})})]})}}]),n}(c.Component),M=p.a.Sider,L=v.a.confirm,T=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={theme:"light",menuList:[],onAddStatus:!1,selectedMenu:"",dragingMenu:{},targetMenu:{}},e.setSelectedMenu=function(t){e.setState({selectedMenu:t}),e.props.onFavTypeChange(t)},e.updateMenuList=function(){Object(y.d)().then((function(t){var n=e.state.selectedMenu,a=t.data;e.setState({menuList:a}),n&&a.find((function(e){return e.title===n}))||!a[0]||e.setSelectedMenu(a[0].title)}))},e.getRankFromTitle=function(t){return e.state.menuList.find((function(e){return e.title===t})).rank},e.onDragStart=function(t){var n=t.target.childNodes[0].childNodes[0].innerHTML;e.setState({dragingMenu:n})},e.onDropOver=function(t){t.preventDefault();var n=e.state.dragingMenu,a=t.target.innerHTML;n!==a&&e.setState({targetMenu:a})},e.onDrop=function(t){var n=e.state,a=n.targetMenu,i=n.dragingMenu;Object(y.f)(i,a).then((function(t){"0"===t.status&&e.updateMenuList()})),e.setState({targetMenu:{},dragingMenu:{}})},e.getMenuNodes=function(t){var n=e.state,a=n.targetMenu,i=n.dragingMenu;return t.map((function(t){var n={};if(a===t.title){var r=e.getRankFromTitle(a);n=e.getRankFromTitle(i)>r?{borderTop:"2px dashed #1890ff"}:{borderBottom:"2px dashed #1890ff"}}return Object(w.jsx)(O.a.Item,{style:n,draggable:!0,onDragStart:e.onDragStart,onDragOver:e.onDropOver,onDrop:e.onDrop,children:Object(w.jsx)(C,{title:t.title,editFavType:e.editFavType})},t.title)}))},e.onAdd=function(){return e.setState({onAddStatus:!0})},e.onDel=function(){L({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664?",onOk:function(){Object(y.b)(e.state.selectedMenu).then((function(t){"0"===t.status&&(f.b.success("\u5220\u9664\u6210\u529f\uff01"),e.updateMenuList())}))}})},e.onSelect=function(t){return e.setSelectedMenu(t.key)},e.editFavType=function(t,n){e.state.menuList.find((function(e){return e.title===n}))?f.b.error("\u5df2\u6709\u76f8\u540c\u7c7b\u522b\uff0c\u8bf7\u66f4\u6362\u4e00\u4e2a\uff01"):n&&Object(y.h)(n,void 0,t).then((function(a){"0"===a.status&&(f.b.success("\u4fee\u6539\u6210\u529f\uff01"),e.updateMenuList(),t===e.state.selectedMenu&&e.setState({selectedMenu:n}))}))},e.addFavType=function(t){var n=e.state.menuList;if(n.find((function(e){return e.title===t})))f.b.error("\u5df2\u6709\u76f8\u540c\u7c7b\u522b\uff0c\u8bf7\u66f4\u6362\u4e00\u4e2a\uff01");else if(t){var a=n.length;Object(y.h)(t,a).then((function(i){"0"===i.status&&(f.b.success("\u6dfb\u52a0\u6210\u529f\uff01"),n.push({rank:a,title:t}),e.setState({menuList:n}))}))}e.setState({onAddStatus:!1})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.updateMenuList()}},{key:"render",value:function(){var e=this.state,t=e.menuList,n=e.onAddStatus,a=e.selectedMenu,i=this.getMenuNodes(t);return Object(w.jsxs)(M,{width:"150",className:"favourites-sider",theme:this.state.theme,children:[Object(w.jsxs)(O.a,{className:"favourites-sider-menu",mode:"inline",selectedKeys:[a],onSelect:this.onSelect,children:[i,Object(w.jsx)(O.a.Item,{disabled:!0,style:{display:n?"block":"none"},children:Object(w.jsx)(S,{editFavType:this.addFavType})},"new-menu")]}),Object(w.jsxs)("div",{style:Object(g.a)()?{display:"block"}:{display:"none"},children:[Object(w.jsx)(b.a,{type:"link",style:{width:"50%"},onClick:this.onAdd,children:Object(w.jsx)(m.a,{style:{fontSize:"20px"}})}),Object(w.jsx)(b.a,{type:"link",style:{width:"50%"},onClick:this.onDel,children:Object(w.jsx)(x.a,{style:{fontSize:"20px"}})})]})]})}}]),n}(c.Component),F=(n(218),n(219)),D=(n(180),n(190)),A=(n(169),n(173)),R=(n(179),n(176)),E=(n(170),n(174)),N=(n(308),n(305)),I=n(309),U=(n(313),n(307)),z=(n(312),n(306)),q=n(317),_=n(318),H=(n(303),z.a.Meta),V=v.a.confirm,B=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onEdit=function(){var t=e.props,n=t.url,a=t.title,i=t.description,r=t.type,s=t.rank;e.props.onEdit(n,a,i,r,s)},e.onDel=function(){V({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664?",onOk:function(){Object(y.a)(e.props.url).then((function(t){"0"===t.status&&(f.b.success("\u5220\u9664\u6210\u529f\uff01"),e.props.update())}))}})},e.onRankChange=function(t){var n=e.props.url;Object(y.g)(n,void 0,void 0,t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.title,a=e.description,i=e.rank;return Object(w.jsx)(z.a,{style:{maxWidth:"550px",minWidth:"200px"},headStyle:{minHeight:"36px"},actions:Object(g.a)()?[Object(w.jsx)(q.a,{onClick:this.onEdit},"edit"),Object(w.jsx)(x.a,{onClick:this.onDel},"delete")]:[],title:Object(w.jsx)(F.a,{disabled:!Object(g.a)(),defaultValue:i,onChange:this.onRankChange,style:{width:"100%",textAlign:"center"}}),hoverable:!0,children:Object(w.jsx)(H,{avatar:Object(w.jsx)(U.a,{size:50,shape:"square",src:t+"favicon.ico",icon:Object(w.jsx)(_.a,{})}),title:n,description:a,onClick:function(){window.open(t)}})})}}]),n}(c.Component),J=N.a.Option,K=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showStatus:0},e.formRef=o.a.createRef(),e.oldUrl="",e.getCardNodes=function(t){return t.map((function(t){return Object(w.jsx)(E.a,{children:Object(w.jsx)(B,{url:t.url,title:t.title,description:t.description,type:t.type,rank:t.rank,update:e.props.update,onEdit:e.onEdit})},t.url)}))},e.updateItem=function(){e.formRef.current.validateFields().then((function(t){var n=t.url,a=t.title,i=t.description,r=t.type,s=t.rank;Object(y.g)(n,r,a,s,i,e.oldUrl).then((function(t){"0"===t.status&&(e.props.update(),e.afterUpdate(),f.b.success("\u6dfb\u52a0\u6210\u529f\uff01"))}))})).catch((function(e){return f.b.error("\u8bf7\u6b63\u786e\u586b\u5199\u4fe1\u606f\uff01")}))},e.afterUpdate=function(){e.setState({showStatus:0}),e.formRef.current.resetFields(),e.oldUrl=""},e.onEdit=function(t,n,a,i,r){e.oldUrl=t,Object(y.d)().then((function(s){var c=s.data.map((function(e){return Object(w.jsx)(J,{value:e.title,children:e.title},e.title)}));e.formRef.current.setFieldsValue({url:t,title:n,description:a,type:i,rank:r}),e.setState({typeOptions:c,showStatus:1})}))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.itemList,n=this.getCardNodes(t);return Object(w.jsxs)("div",{children:[Object(w.jsxs)(A.a,{gutter:[16,24],children:[n,Object(w.jsx)("div",{style:Object(g.a)()?{display:"block"}:{display:"none"},children:Object(w.jsx)(R.a,{title:"\u6dfb\u52a0\u4e00\u4e2a",children:Object(w.jsx)(b.a,{icon:Object(w.jsx)(I.a,{style:{fontSize:"50px",color:"#C0C0C0"}}),style:{height:"180px",width:"180px"},onClick:function(){e.onEdit("","","",e.props.favType,3)}})})})]}),Object(w.jsx)(v.a,{forceRender:!0,title:"\u6536\u85cf\u9879\u4fe1\u606f",visible:1===this.state.showStatus,onOk:function(){e.updateItem()},onCancel:this.afterAdd,children:Object(w.jsxs)(D.a,{ref:this.formRef,children:[Object(w.jsx)(D.a.Item,{name:"url",rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}],children:Object(w.jsx)(k.a,{placeholder:"\u8bf7\u8f93\u5165URL"})}),Object(w.jsx)(D.a.Item,{name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],children:Object(w.jsx)(k.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"})}),Object(w.jsx)(D.a.Item,{name:"description",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f8\u5173\u63cf\u8ff0"}],children:Object(w.jsx)(k.a,{placeholder:"\u8bf7\u8f93\u5165\u76f8\u5173\u63cf\u8ff0"})}),Object(w.jsx)(D.a.Item,{name:"type",children:Object(w.jsx)(N.a,{children:this.state.typeOptions})}),Object(w.jsx)(D.a.Item,{name:"rank",children:Object(w.jsx)(F.a,{style:{margin:"auto 0"}})})]})})]})}}]),n}(c.Component),W=(n(304),p.a.Content),$=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={theme:"light",itemList:[]},e.onFavTypeChange=function(){var t=Object(h.a)(j.a.mark((function t(n){var a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.c)(n);case 2:a=t.sent,i=a.data,e.setState({itemList:i,favType:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.favType;return Object(w.jsxs)(p.a,{className:"favourites",children:[Object(w.jsx)(T,{onFavTypeChange:this.onFavTypeChange}),Object(w.jsx)(p.a,{children:Object(w.jsx)(W,{className:"favourites-content",children:Object(w.jsx)(K,{itemList:this.state.itemList,favType:this.state.favType,update:function(){return e.onFavTypeChange(t)}})})})]})}}]),n}(c.Component),P=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(l.a,{}),Object(w.jsxs)(u.d,{children:[Object(w.jsx)(u.b,{path:"/tools/favorites",component:$}),Object(w.jsx)(u.a,{to:"/"})]})]})}}]),n}(c.Component)}}]);
//# sourceMappingURL=5.69a1cf7c.chunk.js.map
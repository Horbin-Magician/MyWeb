(this["webpackJsonpmy-web"]=this["webpackJsonpmy-web"]||[]).push([[10],{131:function(t,e,n){"use strict";n.d(e,"h",(function(){return u})),n.d(e,"n",(function(){return l})),n.d(e,"m",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"j",(function(){return f})),n.d(e,"b",(function(){return j})),n.d(e,"g",(function(){return b})),n.d(e,"d",(function(){return O})),n.d(e,"l",(function(){return v})),n.d(e,"i",(function(){return m})),n.d(e,"f",(function(){return y})),n.d(e,"c",(function(){return x})),n.d(e,"k",(function(){return g}));n(129);var r=n(59),a=n(152),i=n.n(a);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(a){("GET"===n?i.a.get(t,{params:e}):i.a.post(t,e)).then((function(t){a(t.data)})).catch((function(t){r.b.error("\u8bf7\u6c42\u51fa\u9519\uff1a"+t.message)}))}))}var c=n(153),o=n.n(c),u=function(t,e){return s("/api/login",{username:t,password:e=o()(e)},"POST")},l=function(){return s("/api/user",{type:"get"},"POST")},d=function(t,e,n){return s("/api/user",{type:"update",username:t,password:e=o()(e),authority:n},"POST")},p=function(t){s("/api/user",{type:"del",username:t},"POST")},h=function(){return s("/api/authority",{type:"get"},"POST")},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s("/api/authority",{type:"update",name:t,menus:e},"POST")},j=function(t){s("/api/authority",{type:"del",name:t},"POST")},b=function(){return s("/api/favourites/favtype",{type:"get"},"POST")},O=function(t){return s("/api/favourites/favtype",{type:"del",title:t},"POST")},v=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return s("/api/favourites/favtype",{type:"update",title:t,rank:e,oldTitle:n},"POST")},m=function(t,e){return s("/api/favourites/favtype",{type:"move",fType:t,tType:e},"POST")},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return s("/api/favourites/favitem",{type:"get",favType:t},"POST")},x=function(t){return s("/api/favourites/favitem",{type:"del",url:t},"POST")},g=function(t,e,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return s("/api/favourites/favitem",{type:"update",url:t,favType:e,title:n,rank:r,description:a,oldUrl:i},"POST")}},157:function(t,e,n){},162:function(t,e,n){"use strict";n(154);var r=n(158),a=(n(132),n(130)),i=(n(155),n(159)),s=n(39),c=n(40),o=n(42),u=n(41),l=(n(156),n(146)),d=n(0),p=n(66),h=n(7),f=n(360),j=n(227),b=n(347),O=n(355),v=(n(134),n(136)),m=(n(140),n(144)),y=(n(138),n(139)),x=n(141),g=n.n(x),S=(n(129),n(59)),k=n(142),w=n(190),T=n(131),C=n(68),M=n(70),L=n(11),F=function(t){Object(o.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).onFinish=function(){var t=Object(k.a)(g.a.mark((function t(e){var n,r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,r=e.password,t.next=3,Object(T.h)(n,r);case 3:(a=t.sent)&&"0"===a.status?(S.b.success("\u767b\u5f55\u6210\u529f\uff0c\u6b22\u8fce\u56de\u6765\uff5e"),C.a.userdata=a,M.a.saveUser(a)):S.b.error("\u767b\u5f55\u5931\u8d25\uff0c\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u8bef\uff01");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t}return Object(c.a)(n,[{key:"render",value:function(){var t=C.a.userdata;return t&&"0"===t.status&&this.props.showLogin&&(S.b.info("\u5df2\u7ecf\u767b\u5f55\uff0c\u8bf7\u52ff\u91cd\u590d\u767b\u5f55\uff01"),this.props.switchShow()),Object(L.jsx)(v.a,{title:"\u7528\u6237\u767b\u5f55",visible:this.props.showLogin,onCancel:this.props.switchShow,footer:null,children:Object(L.jsxs)(m.a,{name:"normal_login",footer:null,initialValues:{},onFinish:this.onFinish,children:[Object(L.jsx)(m.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{min:4,message:"\u7528\u6237\u540d\u6700\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-z0-9_*!]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u7531\u82f1\u6587\u3001\u6570\u5b57\u6216\u82f1\u6587\u5b57\u7b26_*!\u7ec4\u6210"}],children:Object(L.jsx)(y.a,{prefix:Object(L.jsx)(O.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})}),Object(L.jsx)(m.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"},{min:6,message:"\u5bc6\u7801\u6700\u5c116\u4f4d"},{max:16,message:"\u5bc6\u7801\u6700\u591a16\u4f4d"},{pattern:/^[a-zA-z0-9_*!]+$/,message:"\u5bc6\u7801\u5fc5\u987b\u7531\u82f1\u6587\u3001\u6570\u5b57\u6216\u82f1\u6587\u5b57\u7b26_*!\u7ec4\u6210"}],children:Object(L.jsx)(y.a,{prefix:Object(L.jsx)(w.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(L.jsx)(m.a.Item,{children:Object(L.jsx)(a.a,{style:{width:"100%"},type:"primary",htmlType:"submit",children:"\u767b\u5f55"})})]})})}}]),n}(d.Component),D=(n(157),l.a.SubMenu),A=l.a.Item,E=function(t){Object(o.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={showLogin:!1},t.onUserClick=function(){t.switchLoginShow()},t.switchLoginShow=function(){return t.setState({showLogin:!t.state.showLogin})},t}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.history.location.pathname.split("/"),e=""===t[t.length-1]?"home":t[t.length-1];return Object(L.jsxs)(r.a,{className:"header",children:[Object(L.jsx)(i.a,{children:Object(L.jsxs)(l.a,{className:"header-menu",mode:"horizontal",selectedKeys:[e],children:[Object(L.jsx)(A,{icon:Object(L.jsx)(f.a,{}),children:Object(L.jsx)(p.b,{to:"/",children:"\u9996\u9875"})},"home"),Object(L.jsx)(D,{title:"\u5c0f\u5de5\u5177",icon:Object(L.jsx)(j.a,{}),children:Object(L.jsx)(A,{children:Object(L.jsx)(p.b,{to:"/tools/favorites",children:"\u6536\u85cf\u5939"})},"favorites")},"tools"),Object(L.jsx)(A,{icon:Object(L.jsx)(b.a,{}),children:Object(L.jsx)(p.b,{to:"/about",children:"\u5173\u4e8e"})},"about")]})}),Object(L.jsx)(i.a,{children:Object(L.jsx)(a.a,{type:"primary",shape:"circle",onClick:this.onUserClick,children:Object(L.jsx)(O.a,{})})}),Object(L.jsx)(F,{switchShow:this.switchLoginShow,showLogin:this.state.showLogin})]})}}]),n}(d.Component);e.a=Object(h.g)(E)},332:function(t,e,n){},333:function(t,e,n){},354:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return K}));var r=n(39),a=n(40),i=n(42),s=n(41),c=n(0),o=n.n(c),u=n(7),l=n(162),d=n(141),p=n.n(d),h=n(142),f=(n(182),n(183)),j=(n(132),n(130)),b=(n(129),n(59)),O=(n(156),n(146)),v=(n(134),n(136)),m=n(361),y=n(362),x=n(131),g=(n(138),n(139)),S=n(11),k=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).input=o.a.createRef(),t.onExit=function(){t.props.editFavType(t.input.current.state.value),t.input.current.setState({value:""})},t}return Object(a.a)(n,[{key:"componentDidUpdate",value:function(){this.input.current.focus()}},{key:"render",value:function(){var t=this;return Object(S.jsx)(g.a,{ref:this.input,onBlur:this.onExit,onPressEnter:function(){t.input.current.blur()}})}}]),n}(c.Component),w=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={onEdit:!1},t.editFavType=function(e){t.props.editFavType(t.props.title,e),t.setState({onEdit:!1})},t.onDoubleClick=function(){t.setState({onEdit:!0})},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.state.onEdit,e=this.props.title;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{style:{display:t?"none":"block"},onDoubleClick:this.onDoubleClick,children:e}),Object(S.jsx)("div",{style:{display:t?"block":"none"},children:Object(S.jsx)(k,{editFavType:this.editFavType})})]})}}]),n}(c.Component),T=f.a.Sider,C=v.a.confirm,M=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={theme:"light",menuList:[],onAddStatus:!1,selectedMenu:"",dragingMenu:{},targetMenu:{}},t.setSelectedMenu=function(e){t.setState({selectedMenu:e}),t.props.onFavTypeChange(e)},t.updateMenuList=function(){Object(x.g)().then((function(e){var n=t.state.selectedMenu,r=e.data;t.setState({menuList:r}),n&&r.find((function(t){return t.title===n}))||!r[0]||t.setSelectedMenu(r[0].title)}))},t.getRankFromTitle=function(e){return t.state.menuList.find((function(t){return t.title===e})).rank},t.onDragStart=function(e){var n=e.target.childNodes[0].childNodes[0].innerHTML;t.setState({dragingMenu:n})},t.onDropOver=function(e){e.preventDefault();var n=t.state.dragingMenu,r=e.target.innerHTML;n!==r&&t.setState({targetMenu:r})},t.onDrop=function(e){var n=t.state,r=n.targetMenu,a=n.dragingMenu;Object(x.i)(a,r).then((function(e){"0"===e.status&&t.updateMenuList()})),t.setState({targetMenu:{},dragingMenu:{}})},t.getMenuNodes=function(e){var n=t.state,r=n.targetMenu,a=n.dragingMenu;return e.map((function(e){var n={};if(r===e.title){var i=t.getRankFromTitle(r);n=t.getRankFromTitle(a)>i?{borderTop:"2px dashed #1890ff"}:{borderBottom:"2px dashed #1890ff"}}return Object(S.jsx)(O.a.Item,{style:n,draggable:!0,onDragStart:t.onDragStart,onDragOver:t.onDropOver,onDrop:t.onDrop,children:Object(S.jsx)(w,{title:e.title,editFavType:t.editFavType})},e.title)}))},t.onAdd=function(){return t.setState({onAddStatus:!0})},t.onDel=function(){C({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664?",onOk:function(){Object(x.d)(t.state.selectedMenu).then((function(e){"0"===e.status&&(b.b.success("\u5220\u9664\u6210\u529f\uff01"),t.updateMenuList())}))}})},t.onSelect=function(e){return t.setSelectedMenu(e.key)},t.editFavType=function(e,n){t.state.menuList.find((function(t){return t.title===n}))?b.b.error("\u5df2\u6709\u76f8\u540c\u7c7b\u522b\uff0c\u8bf7\u66f4\u6362\u4e00\u4e2a\uff01"):n&&Object(x.l)(n,void 0,e).then((function(r){"0"===r.status&&(b.b.success("\u4fee\u6539\u6210\u529f\uff01"),t.updateMenuList(),e===t.state.selectedMenu&&t.setState({selectedMenu:n}))}))},t.addFavType=function(e){var n=t.state.menuList;if(n.find((function(t){return t.title===e})))b.b.error("\u5df2\u6709\u76f8\u540c\u7c7b\u522b\uff0c\u8bf7\u66f4\u6362\u4e00\u4e2a\uff01");else if(e){var r=n.length;Object(x.l)(e,r).then((function(a){"0"===a.status&&(b.b.success("\u6dfb\u52a0\u6210\u529f\uff01"),n.push({rank:r,title:e}),t.setState({menuList:n}))}))}t.setState({onAddStatus:!1})},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.updateMenuList()}},{key:"render",value:function(){var t=this.state,e=t.menuList,n=t.onAddStatus,r=t.selectedMenu,a=this.getMenuNodes(e);return Object(S.jsxs)(T,{width:"150",className:"favourites-sider",theme:this.state.theme,children:[Object(S.jsxs)(O.a,{className:"favourites-sider-menu",mode:"inline",selectedKeys:[r],onSelect:this.onSelect,children:[a,Object(S.jsx)(O.a.Item,{disabled:!0,style:{display:n?"block":"none"},children:Object(S.jsx)(k,{editFavType:this.addFavType})},"new-menu")]}),Object(S.jsxs)("div",{children:[Object(S.jsx)(j.a,{type:"link",style:{width:"50%"},onClick:this.onAdd,children:Object(S.jsx)(m.a,{style:{fontSize:"20px"}})}),Object(S.jsx)(j.a,{type:"link",style:{width:"50%"},onClick:this.onDel,children:Object(S.jsx)(y.a,{style:{fontSize:"20px"}})})]})]})}}]),n}(c.Component),L=(n(217),n(222)),F=(n(140),n(144)),D=(n(154),n(158)),A=(n(151),n(150)),E=(n(155),n(159)),P=(n(169),n(161)),R=n(348),N=(n(349),n(345)),I=(n(189),n(186)),U=n(364),z=n(363),q=(n(332),I.a.Meta),_=v.a.confirm,H=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).onEdit=function(){var e=t.props,n=e.url,r=e.title,a=e.description,i=e.type,s=e.rank;t.props.onEdit(n,r,a,i,s)},t.onDel=function(){_({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664?",onOk:function(){Object(x.c)(t.props.url).then((function(e){"0"===e.status&&(b.b.success("\u5220\u9664\u6210\u529f\uff01"),t.props.update())}))}})},t.onRankChange=function(e){var n=t.props.url;Object(x.k)(n,void 0,void 0,e)},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.url,n=t.title,r=t.description,a=t.rank;return Object(S.jsx)(I.a,{style:{maxWidth:"550px",minWidth:"200px"},headStyle:{minHeight:"36px"},actions:[Object(S.jsx)(U.a,{onClick:this.onEdit},"edit"),Object(S.jsx)(y.a,{onClick:this.onDel},"delete")],title:Object(S.jsx)(L.a,{defaultValue:a,onChange:this.onRankChange,style:{width:"100%",textAlign:"center"}}),hoverable:!0,children:Object(S.jsx)(q,{avatar:Object(S.jsx)(N.a,{size:50,shape:"square",src:e+"favicon.ico",icon:Object(S.jsx)(z.a,{})}),title:n,description:r,onClick:function(){window.open(e)}})})}}]),n}(c.Component),V=P.a.Option,B=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={showStatus:0},t.formRef=o.a.createRef(),t.oldUrl="",t.getCardNodes=function(e){return e.map((function(e){return Object(S.jsx)(E.a,{children:Object(S.jsx)(H,{url:e.url,title:e.title,description:e.description,type:e.type,rank:e.rank,update:t.props.update,onEdit:t.onEdit})},e.url)}))},t.updateItem=function(){t.formRef.current.validateFields().then((function(e){var n=e.url,r=e.title,a=e.description,i=e.type,s=e.rank;Object(x.k)(n,i,r,s,a,t.oldUrl).then((function(e){"0"===e.status&&(t.props.update(),t.afterUpdate(),b.b.success("\u6dfb\u52a0\u6210\u529f\uff01"))}))})).catch((function(t){return b.b.error("\u8bf7\u6b63\u786e\u586b\u5199\u4fe1\u606f\uff01")}))},t.afterUpdate=function(){t.setState({showStatus:0}),t.formRef.current.resetFields(),t.oldUrl=""},t.onEdit=function(e,n,r,a,i){t.oldUrl=e,Object(x.g)().then((function(s){var c=s.data.map((function(t){return Object(S.jsx)(V,{value:t.title,children:t.title},t.title)}));t.formRef.current.setFieldsValue({url:e,title:n,description:r,type:a,rank:i}),t.setState({typeOptions:c,showStatus:1})}))},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this,e=this.props.itemList,n=this.getCardNodes(e);return Object(S.jsxs)("div",{children:[Object(S.jsxs)(D.a,{gutter:[16,24],children:[n,Object(S.jsx)(A.a,{title:"\u6dfb\u52a0\u4e00\u4e2a",children:Object(S.jsx)(j.a,{icon:Object(S.jsx)(R.a,{style:{fontSize:"50px",color:"#C0C0C0"}}),style:{height:"180px",width:"180px"},onClick:function(){t.onEdit("","","",t.props.favType,3)}})})]}),Object(S.jsx)(v.a,{forceRender:!0,title:"\u6536\u85cf\u9879\u4fe1\u606f",visible:1===this.state.showStatus,onOk:function(){t.updateItem()},onCancel:this.afterAdd,children:Object(S.jsxs)(F.a,{ref:this.formRef,children:[Object(S.jsx)(F.a.Item,{name:"url",rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}],children:Object(S.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165URL"})}),Object(S.jsx)(F.a.Item,{name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],children:Object(S.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"})}),Object(S.jsx)(F.a.Item,{name:"description",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f8\u5173\u63cf\u8ff0"}],children:Object(S.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165\u76f8\u5173\u63cf\u8ff0"})}),Object(S.jsx)(F.a.Item,{name:"type",children:Object(S.jsx)(P.a,{children:this.state.typeOptions})}),Object(S.jsx)(F.a.Item,{name:"rank",children:Object(S.jsx)(L.a,{style:{margin:"auto 0"}})})]})})]})}}]),n}(c.Component),G=(n(333),f.a.Content),J=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={theme:"light",itemList:[]},t.onFavTypeChange=function(){var e=Object(h.a)(p.a.mark((function e(n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.f)(n);case 2:r=e.sent,a=r.data,t.setState({itemList:a,favType:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(a.a)(n,[{key:"render",value:function(){var t=this,e=this.state.favType;return Object(S.jsxs)(f.a,{className:"favourites",children:[Object(S.jsx)(M,{onFavTypeChange:this.onFavTypeChange}),Object(S.jsx)(f.a,{children:Object(S.jsx)(G,{className:"favourites-content",children:Object(S.jsx)(B,{itemList:this.state.itemList,favType:this.state.favType,update:function(){return t.onFavTypeChange(e)}})})})]})}}]),n}(c.Component),K=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(l.a,{}),Object(S.jsxs)(u.d,{children:[Object(S.jsx)(u.b,{path:"/tools/favorites",component:J}),Object(S.jsx)(u.a,{to:"/"})]})]})}}]),n}(c.Component)}}]);
//# sourceMappingURL=10.94c150b4.chunk.js.map
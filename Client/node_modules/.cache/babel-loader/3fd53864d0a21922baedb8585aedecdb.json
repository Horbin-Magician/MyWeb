{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/userManage/userManage.jsx\";\nimport React, { Component } from 'react';\nimport AddForm from './components/addForm';\nimport SetForm from './components/setForm';\nimport { reqUserList, reqDelUser, reqUpdateUser } from '../../../../api/index';\n/*\n管理-统计\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UserManage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      //选中的role\n      showStatus: 0 //显示状态，0不显示modal,1显示添加modal，2显示设置modal\n\n    };\n\n    this.updateUsers = () => {\n      reqUserList().then(data => {\n        this.setState({\n          users: data.data\n        });\n        console.log(data.data);\n      });\n    };\n\n    this.updateUser = (username, password, authority) => {\n      if (username) {\n        reqUpdateUser(username, password, authority).then(data => {\n          if (data.status === '0') {\n            _message.success('更新用户成功！');\n\n            this.updateUsers();\n          } else _message.error('更新用户失败！');\n        });\n        this.setState({\n          role: {}\n        });\n      }\n\n      this.setState({\n        showStatus: 0\n      });\n    };\n\n    this.delUser = () => {\n      reqDelUser(this.state.user.username).then(data => {\n        if (data.status === '0') {\n          _message.success('删除用户成功！');\n\n          this.updateUsers();\n        } else _message.error('删除用户失败！');\n      });\n      this.setState({\n        user: {}\n      });\n    };\n\n    this.onRow = user => {\n      return {\n        onClick: event => {\n          this.setState({\n            user\n          });\n        }\n      };\n    };\n\n    this.columns = [{\n      title: '用户名',\n      dataIndex: 'username'\n    }, {\n      title: '密码',\n      dataIndex: 'password'\n    }, {\n      title: '所属角色',\n      dataIndex: 'authority'\n    }];\n  }\n\n  componentDidMount() {\n    this.updateUsers();\n  }\n\n  render() {\n    const {\n      users,\n      user,\n      showStatus\n    } = this.state;\n\n    const title = /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [/*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: () => {\n          this.setState({\n            showStatus: 1\n          });\n        },\n        children: \"\\u521B\\u5EFA\\u7528\\u6237\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: this.delUser,\n        disabled: !user.username,\n        children: \"\\u5220\\u9664\\u7528\\u6237\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: () => {\n          this.setState({\n            showStatus: 2\n          });\n        },\n        disabled: !user.username,\n        children: \"\\u7F16\\u8F91\\u89D2\\u8272\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(_Card, {\n      title: title,\n      children: [/*#__PURE__*/_jsxDEV(_Table, {\n        bordered: true,\n        rowKey: \"username\",\n        dataSource: users,\n        columns: this.columns,\n        rowSelection: {\n          type: 'radio',\n          selectedRowKeys: [user.username]\n        },\n        onRow: this.onRow\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AddForm, {\n        showStatus: showStatus,\n        addUser: (username, password, authority) => {\n          this.updateRole(username, password, authority);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SetForm, {\n        showStatus: showStatus,\n        role: this.state.role,\n        setRole: (name, menus) => {\n          this.updateRole(name, menus);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/userManage/userManage.jsx"],"names":["React","Component","AddForm","SetForm","reqUserList","reqDelUser","reqUpdateUser","UserManage","state","user","showStatus","updateUsers","then","data","setState","users","console","log","updateUser","username","password","authority","status","success","error","role","delUser","onRow","onClick","event","columns","title","dataIndex","componentDidMount","render","type","selectedRowKeys","updateRole","name","menus"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {Card, Button, Table, message} from 'antd'\n\nimport AddForm from './components/addForm'\nimport SetForm from './components/setForm'\nimport {reqUserList, reqDelUser, reqUpdateUser} from '../../../../api/index'\n\n\n/*\n管理-统计\n */\nexport default class UserManage extends Component{\n    state = {\n        user: {}, //选中的role\n        showStatus:0, //显示状态，0不显示modal,1显示添加modal，2显示设置modal\n    }\n\n    componentDidMount(){\n        this.updateUsers()\n    }\n\n    updateUsers = () => {\n        reqUserList().then(data =>{\n            this.setState({users:data.data})\n            console.log(data.data)\n        })\n    }\n\n    updateUser = (username, password, authority) =>{\n        if(username){\n            reqUpdateUser(username, password, authority).then(data =>{\n                if(data.status === '0'){\n                    message.success('更新用户成功！')\n                    this.updateUsers()\n                }\n                else message.error('更新用户失败！')\n            })\n            this.setState({role:{}})\n        }\n        this.setState({showStatus:0})\n    }\n\n    delUser = () => {\n        reqDelUser(this.state.user.username).then(data =>{\n            if(data.status === '0'){\n                message.success('删除用户成功！')\n                this.updateUsers()\n            }\n            else message.error('删除用户失败！')\n        })\n        this.setState({user:{}})\n    }\n\n    onRow = (user) => {\n        return{\n            onClick: event =>{\n                this.setState({user})\n            }\n        }\n    }\n\n    columns = [{title:'用户名',dataIndex:'username'}, {title:'密码',dataIndex:'password'}, {title:'所属角色',dataIndex:'authority'},]\n\n    render(){\n        const {users, user, showStatus} = this.state\n        const title=(\n            <span>\n                <Button type='primary' onClick={()=>{this.setState({showStatus:1})}}>\n                    创建用户\n                </Button> &nbsp;\n                <Button type='primary' onClick={this.delUser} disabled={!user.username}>\n                    删除用户\n                </Button> &nbsp;\n                <Button type='primary' onClick={()=>{this.setState({showStatus:2})}} disabled={!user.username}>\n                    编辑角色\n                </Button>\n            </span>\n        )\n        return(\n            <Card title={title}>\n                <Table bordered\n                    rowKey='username'\n                    dataSource={users}\n                    columns={this.columns}\n                    rowSelection={{type: 'radio', selectedRowKeys: [user.username]}}\n                    onRow={this.onRow}\n                />\n                <AddForm showStatus={showStatus} addUser={(username, password, authority)=>{this.updateRole(username, password, authority)}}/>\n                <SetForm showStatus={showStatus} role={this.state.role} setRole={(name, menus)=>{this.updateRole(name, menus)}}/>\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}
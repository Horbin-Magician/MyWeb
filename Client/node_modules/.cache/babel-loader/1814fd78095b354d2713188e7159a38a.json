{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import _regeneratorRuntime from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import\"antd/es/message/style\";import _message from\"antd/es/message\";import _asyncToGenerator from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from'react';import{Redirect}from'react-router-dom';import{UserOutlined,LockOutlined}from'@ant-design/icons';import'./login.less';import{reqLogin}from'../../api';import memoryUtils from'../../utils/memoryUtils';import storageUtils from'../../utils/storageUtils';/*\n登录页的路由组件\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onFinish=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var username,password,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=values.username,password=values.password;_context.next=3;return reqLogin(username,password);case 3:data=_context.sent;if(data&&data.status==='0'){//登入成功\n_message.success('登录成功，欢迎回来～');memoryUtils.userdata=data;storageUtils.saveUser(data);_this.props.history.replace('/admin');}else{//账号或密码错误\n_message.error('登录失败，账号或密码错误！');}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Login,[{key:\"render\",value:function render(){//判断是否登录,若已登录，重定向到管理界面\nvar userdata=memoryUtils.userdata;if(userdata&&userdata.status==='0'){return/*#__PURE__*/_jsx(Redirect,{to:\"/admin\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"login-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u7528\\u6237\\u767B\\u5F55\"}),/*#__PURE__*/_jsxs(_Form,{name:\"normal_login\",className:\"login-form\",initialValues:{},onFinish:this.onFinish,children:[/*#__PURE__*/_jsx(_Form.Item,{name:\"username\",rules:[{required:true,message:'请输入用户名'},{min:4,message:'用户名最少4位'},{max:12,message:'用户名最多12位'},{pattern:/^[a-zA-z0-9_*!]+$/,message:'用户名必须由英文、数字或英文字符_*!组成'}],children:/*#__PURE__*/_jsx(_Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"\\u7528\\u6237\\u540D\"})}),/*#__PURE__*/_jsx(_Form.Item,{name:\"password\",rules:[{required:true,message:'请输入密码！'},{min:6,message:'密码最少6位'},{max:16,message:'密码最多16位'},{pattern:/^[a-zA-z0-9_*!]+$/,message:'密码必须由英文、数字或英文字符_*!组成'}],children:/*#__PURE__*/_jsx(_Input,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"password\",placeholder:\"\\u5BC6\\u7801\"})}),/*#__PURE__*/_jsx(_Form.Item,{children:/*#__PURE__*/_jsx(_Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",children:\"\\u767B\\u5F55\"})})]})]})});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/login/login.jsx"],"names":["Component","Redirect","UserOutlined","LockOutlined","reqLogin","memoryUtils","storageUtils","Login","onFinish","values","username","password","data","status","success","userdata","saveUser","props","history","replace","error","required","message","min","max","pattern"],"mappings":"ypCAAA,OAAQA,SAAR,KAAwB,OAAxB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,mBAA3C,CACA,MAAO,cAAP,CACA,OAAQC,QAAR,KAAuB,WAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CAEA;AACA;AACA,E,2FACqBC,CAAAA,K,uTACnBC,Q,0FAAW,iBAAOC,MAAP,6IACFC,QADE,CACoBD,MADpB,CACFC,QADE,CACQC,QADR,CACoBF,MADpB,CACQE,QADR,uBAEUP,CAAAA,QAAQ,CAACM,QAAD,CAAWC,QAAX,CAFlB,QAEHC,IAFG,eAGT,GAAGA,IAAI,EAAIA,IAAI,CAACC,MAAL,GAAgB,GAA3B,CAA+B,CAAC;AAC9B,SAAQC,OAAR,CAAgB,YAAhB,EACAT,WAAW,CAACU,QAAZ,CAAuBH,IAAvB,CACAN,YAAY,CAACU,QAAb,CAAsBJ,IAAtB,EACA,MAAKK,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,QAA3B,EACD,CALD,IAKK,CAAC;AACJ,SAAQC,KAAR,CAAc,eAAd,EACD,CAVQ,sD,qHAYX,iBAAS,CACP;AACA,GAAML,CAAAA,QAAQ,CAAGV,WAAW,CAACU,QAA7B,CACA,GAAGA,QAAQ,EAAIA,QAAQ,CAACF,MAAT,GAAoB,GAAnC,CAAuC,CACrC,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACD,CACD,mBACE,YAAK,SAAS,CAAC,OAAf,uBACE,iBAAS,SAAS,CAAC,eAAnB,wBACE,gDADF,cAEE,aAAM,IAAI,CAAC,cAAX,CAA0B,SAAS,CAAC,YAApC,CACE,aAAa,CAAE,EADjB,CAEE,QAAQ,CAAE,KAAKL,QAFjB,wBAIE,WAAM,IAAN,EAAW,IAAI,CAAC,UAAhB,CACE,KAAK,CAAE,CACL,CAACa,QAAQ,CAAE,IAAX,CAAgBC,OAAO,CAAE,QAAzB,CADK,CAEL,CAACC,GAAG,CAAE,CAAN,CAAQD,OAAO,CAAE,SAAjB,CAFK,CAGL,CAACE,GAAG,CAAE,EAAN,CAASF,OAAO,CAAE,UAAlB,CAHK,CAIL,CAACG,OAAO,CAAE,mBAAV,CAA8BH,OAAO,CAAE,uBAAvC,CAJK,CADT,uBAQE,aAAO,MAAM,cAAE,KAAC,YAAD,EAAc,SAAS,CAAC,qBAAxB,EAAf,CAAiE,WAAW,CAAC,oBAA7E,EARF,EAJF,cAcE,WAAM,IAAN,EAAW,IAAI,CAAC,UAAhB,CACE,KAAK,CAAE,CACL,CAACD,QAAQ,CAAE,IAAX,CAAgBC,OAAO,CAAE,QAAzB,CADK,CAEL,CAACC,GAAG,CAAE,CAAN,CAAQD,OAAO,CAAE,QAAjB,CAFK,CAGL,CAACE,GAAG,CAAE,EAAN,CAASF,OAAO,CAAE,SAAlB,CAHK,CAIL,CAACG,OAAO,CAAE,mBAAV,CAA8BH,OAAO,CAAE,sBAAvC,CAJK,CADT,uBAQE,aAAO,MAAM,cAAE,KAAC,YAAD,EAAc,SAAS,CAAC,qBAAxB,EAAf,CAAiE,IAAI,CAAC,UAAtE,CAAiF,WAAW,CAAC,cAA7F,EARF,EAdF,cAwBE,WAAM,IAAN,wBACE,cAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,CAAyC,SAAS,CAAC,mBAAnD,0BADF,EAxBF,GAFF,GADF,EADF,CAmCD,C,mBAtDgCtB,S,SAAdO,K","sourcesContent":["import {Component} from 'react'\nimport { Redirect } from 'react-router-dom';\nimport { Form, Input, Button, message} from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport './login.less'\nimport {reqLogin} from '../../api'\nimport memoryUtils from '../../utils/memoryUtils'\nimport storageUtils from '../../utils/storageUtils'\n\n/*\n登录页的路由组件\n*/ \nexport default class Login extends Component {\n  onFinish = async (values) => {\n    const {username, password} = values\n    const data = await reqLogin(username, password)\n    if(data && data.status === '0'){//登入成功\n      message.success('登录成功，欢迎回来～')\n      memoryUtils.userdata = data\n      storageUtils.saveUser(data)\n      this.props.history.replace('/admin')\n    }else{//账号或密码错误\n      message.error('登录失败，账号或密码错误！')\n    }\n  };\n  render() {\n    //判断是否登录,若已登录，重定向到管理界面\n    const userdata = memoryUtils.userdata \n    if(userdata && userdata.status === '0'){\n      return <Redirect to='/admin'/>\n    }\n    return ( \n      <div className=\"login\">\n        <section className='login-content'>\n          <h2>用户登录</h2>\n          <Form name=\"normal_login\" className=\"login-form\"\n            initialValues={{}}\n            onFinish={this.onFinish}\n          >\n            <Form.Item name=\"username\"\n              rules={[\n                {required: true,message: '请输入用户名'},\n                {min: 4,message: '用户名最少4位'},\n                {max: 12,message: '用户名最多12位'},\n                {pattern: /^[a-zA-z0-9_*!]+$/,message: '用户名必须由英文、数字或英文字符_*!组成'},\n              ]}\n            >\n              <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"用户名\" />\n            </Form.Item>\n            <Form.Item name=\"password\"\n              rules={[\n                {required: true,message: '请输入密码！'},\n                {min: 6,message: '密码最少6位'},\n                {max: 16,message: '密码最多16位'},\n                {pattern: /^[a-zA-z0-9_*!]+$/,message: '密码必须由英文、数字或英文字符_*!组成'},\n              ]}\n            >\n              <Input prefix={<LockOutlined className=\"site-form-item-icon\" />} type=\"password\" placeholder=\"密码\"/>\n            </Form.Item>\n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">登录</Button>\n            </Form.Item>\n          </Form>\n        </section>\n      </div>\n     );\n  }\n}"]},"metadata":{},"sourceType":"module"}
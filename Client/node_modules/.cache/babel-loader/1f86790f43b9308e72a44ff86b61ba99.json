{"ast":null,"code":"import\"antd/es/card/style\";import _Card from\"antd/es/card\";import\"antd/es/table/style\";import _Table from\"antd/es/table\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/message/style\";import _message from\"antd/es/message\";import _classCallCheck from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import AddForm from'./components/addForm';import SetForm from'./components/setForm';import{reqUserList,reqDelUser,reqUpdateUser}from'../../../../api/index';/*\n管理-统计\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserManage=/*#__PURE__*/function(_Component){_inherits(UserManage,_Component);var _super=_createSuper(UserManage);function UserManage(){var _this;_classCallCheck(this,UserManage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:{},//选中的role\nshowStatus:0//显示状态，0不显示modal,1显示添加modal，2显示设置modal\n};_this.updateUsers=function(){return reqUserList().then(function(data){return _this.setState({users:data.data});});};_this.updateUser=function(username,password,authority){if(username){reqUpdateUser(username,password,authority).then(function(data){if(data.status==='0'){_message.success('更新用户成功！');_this.updateUsers();}else _message.error('更新用户失败！');});_this.setState({user:{}});}_this.setState({showStatus:0});};_this.delUser=function(){reqDelUser(_this.state.user.username).then(function(data){if(data.status==='0'){_message.success('删除用户成功！');_this.updateUsers();}else _message.error('删除用户失败！');});_this.setState({user:{}});};_this.onRow=function(user){return{onClick:function onClick(event){return _this.setState({user:user});}};};_this.columns=[{title:'用户名',dataIndex:'username'},{title:'密码',dataIndex:'password'},{title:'所属角色',dataIndex:'authority'}];return _this;}_createClass(UserManage,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateUsers();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,users=_this$state.users,user=_this$state.user,showStatus=_this$state.showStatus;var title=/*#__PURE__*/_jsxs(\"span\",{style:{lineHeight:\"48px\"},children:[/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:function onClick(){_this2.setState({showStatus:1});},children:\"\\u521B\\u5EFA\\u7528\\u6237\"}),\" \\xA0\",/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:this.delUser,disabled:!user.username,children:\"\\u5220\\u9664\\u7528\\u6237\"}),\" \\xA0\",/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:function onClick(){_this2.setState({showStatus:2});},disabled:!user.username,children:\"\\u7F16\\u8F91\\u89D2\\u8272\"})]});return/*#__PURE__*/_jsxs(_Card,{title:title,children:[/*#__PURE__*/_jsx(_Table,{bordered:true,rowKey:\"username\",dataSource:users,columns:this.columns,rowSelection:{type:'radio',selectedRowKeys:[user.username]},onRow:this.onRow}),/*#__PURE__*/_jsx(AddForm,{showStatus:showStatus,addUser:function addUser(username,password,authority){_this2.updateUser(username,password,authority);}}),/*#__PURE__*/_jsx(SetForm,{showStatus:showStatus,user:this.state.user,setUser:function setUser(username,password,authority){_this2.updateUser(username,password,authority);}})]});}}]);return UserManage;}(Component);export{UserManage as default};","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/userManage/userManage.jsx"],"names":["React","Component","AddForm","SetForm","reqUserList","reqDelUser","reqUpdateUser","UserManage","state","user","showStatus","updateUsers","then","data","setState","users","updateUser","username","password","authority","status","success","error","delUser","onRow","onClick","event","columns","title","dataIndex","lineHeight","type","selectedRowKeys"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {Card, Button, Table, message} from 'antd'\n\nimport AddForm from './components/addForm'\nimport SetForm from './components/setForm'\nimport {reqUserList, reqDelUser, reqUpdateUser} from '../../../../api/index'\n\n\n/*\n管理-统计\n */\nexport default class UserManage extends Component{\n    state = {\n        user: {}, //选中的role\n        showStatus:0, //显示状态，0不显示modal,1显示添加modal，2显示设置modal\n    }\n\n    componentDidMount(){\n        this.updateUsers()\n    }\n\n    updateUsers = () => reqUserList().then(data => this.setState({users:data.data}))\n\n    updateUser = (username, password, authority) =>{\n        if(username){\n            reqUpdateUser(username, password, authority).then(data =>{\n                if(data.status === '0'){\n                    message.success('更新用户成功！')\n                    this.updateUsers()\n                }\n                else message.error('更新用户失败！')\n            })\n            this.setState({user:{}})\n        }\n        this.setState({showStatus:0})\n    }\n\n    delUser = () => {\n        reqDelUser(this.state.user.username).then(data =>{\n            if(data.status === '0'){\n                message.success('删除用户成功！')\n                this.updateUsers()\n            }\n            else message.error('删除用户失败！')\n        })\n        this.setState({user:{}})\n    }\n\n    onRow = (user) => {\n        return{\n            onClick: event =>this.setState({user})\n        }\n    }\n\n    columns = [{title:'用户名',dataIndex:'username'}, {title:'密码',dataIndex:'password'}, {title:'所属角色',dataIndex:'authority'},]\n\n    render(){\n        const {users, user, showStatus} = this.state\n        const title=(\n            <span  style={{lineHeight:\"48px\"}}>\n                <Button type='primary' onClick={()=>{this.setState({showStatus:1})}}>\n                    创建用户\n                </Button> &nbsp;\n                <Button type='primary' onClick={this.delUser} disabled={!user.username}>\n                    删除用户\n                </Button> &nbsp;\n                <Button type='primary' onClick={()=>{this.setState({showStatus:2})}} disabled={!user.username}>\n                    编辑角色\n                </Button>\n            </span>\n        )\n        return(\n            <Card title={title}>\n                <Table bordered\n                    rowKey='username'\n                    dataSource={users}\n                    columns={this.columns}\n                    rowSelection={{type: 'radio', selectedRowKeys: [user.username]}}\n                    onRow={this.onRow}\n                />\n                <AddForm showStatus={showStatus} addUser={(username, password, authority)=>{this.updateUser(username, password, authority)}}/>\n                <SetForm showStatus={showStatus} user={this.state.user} setUser={(username, password, authority)=>{this.updateUser(username, password, authority)}}/>\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import\"antd/es/card/style\";import _Card from\"antd/es/card\";import\"antd/es/table/style\";import _Table from\"antd/es/table\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/message/style\";import _message from\"antd/es/message\";import _classCallCheck from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import AddForm from'./components/addForm';import SetForm from'./components/setForm';import{reqAuthorityList,reqUpdateAuthority,reqDelAuthority}from'../../../../api';/*\n管理-统计\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserManage=/*#__PURE__*/function(_Component){_inherits(UserManage,_Component);var _super=_createSuper(UserManage);function UserManage(){var _this;_classCallCheck(this,UserManage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={role:{},//选中的role\nshowStatus:0//显示状态，0不显示modal,1显示添加modal，2显示设置modal\n};_this.updateRoles=function(){reqAuthorityList().then(function(data){_this.setState({roles:data.data});});};_this.updateRole=function(name){var menus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(name){reqUpdateAuthority(name,menus).then(function(data){if(data.status==='0'){_message.success('更新角色成功！');_this.updateRoles();}else _message.error('更新角色失败！');});_this.setState({role:{}});}_this.setState({showStatus:0});};_this.delRole=function(){reqDelAuthority(_this.state.role.name).then(function(data){if(data.status==='0'){_message.success('删除角色成功！');_this.updateRoles();}else _message.error('删除角色失败！');});_this.setState({role:{}});};_this.onRow=function(role){return{onClick:function onClick(event){_this.setState({role:role});}};};_this.columns=[{title:'角色名称',dataIndex:'name'},{title:'拥有权限',dataIndex:'menus'}];return _this;}_createClass(UserManage,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateRoles();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,roles=_this$state.roles,role=_this$state.role,showStatus=_this$state.showStatus;var title=/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:function onClick(){_this2.setState({showStatus:1});},children:\"\\u521B\\u5EFA\\u89D2\\u8272\"}),\" \\xA0\",/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:this.delRole,disabled:!role.name,children:\"\\u5220\\u9664\\u89D2\\u8272\"}),\" \\xA0\",/*#__PURE__*/_jsx(_Button,{type:\"primary\",onClick:function onClick(){_this2.setState({showStatus:2});},disabled:!role.name,children:\"\\u8BBE\\u7F6E\\u89D2\\u8272\\u6743\\u9650\"})]});return/*#__PURE__*/_jsxs(_Card,{title:title,children:[/*#__PURE__*/_jsx(_Table,{bordered:true,rowKey:\"name\",dataSource:roles,columns:this.columns,rowSelection:{type:'radio',selectedRowKeys:[role.name]},onRow:this.onRow}),/*#__PURE__*/_jsx(AddForm,{showStatus:showStatus,addRole:function addRole(name){_this2.updateRole(name);}}),/*#__PURE__*/_jsx(SetForm,{showStatus:showStatus,role:this.state.role,setRole:function setRole(name,menus){_this2.updateRole(name,menus);}})]});}}]);return UserManage;}(Component);export{UserManage as default};","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/authorityManage/authorityManage.jsx"],"names":["React","Component","AddForm","SetForm","reqAuthorityList","reqUpdateAuthority","reqDelAuthority","UserManage","state","role","showStatus","updateRoles","then","data","setState","roles","updateRole","name","menus","status","success","error","delRole","onRow","onClick","event","columns","title","dataIndex","type","selectedRowKeys"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {Card, Button, Table, message} from 'antd'\n\nimport AddForm from './components/addForm'\nimport SetForm from './components/setForm'\nimport {reqAuthorityList, reqUpdateAuthority, reqDelAuthority} from '../../../../api'\n\n/*\n管理-统计\n */\nexport default class UserManage extends Component{\n    state = {\n        role: {}, //选中的role\n        showStatus:0, //显示状态，0不显示modal,1显示添加modal，2显示设置modal\n    }\n\n    componentDidMount(){\n        this.updateRoles()\n    }\n\n    updateRoles = () => {\n        reqAuthorityList().then(data =>{\n            this.setState({roles:data.data})\n        })\n    }\n\n    updateRole = (name, menus='') =>{\n        if(name){\n            reqUpdateAuthority(name, menus).then(data =>{\n                if(data.status === '0'){\n                    message.success('更新角色成功！')\n                    this.updateRoles()\n                }\n                else message.error('更新角色失败！')\n            })\n            this.setState({role:{}})\n        }\n        this.setState({showStatus:0})\n    }\n\n    delRole = () =>{\n        reqDelAuthority(this.state.role.name).then(data =>{\n            if(data.status === '0'){\n                message.success('删除角色成功！')\n                this.updateRoles()\n            }\n            else message.error('删除角色失败！')\n        })\n        this.setState({role:{}})\n    }\n\n    onRow = (role) => {\n        return{\n            onClick: event =>{\n                this.setState({role})\n            }\n        }\n    }\n\n    columns = [{title:'角色名称',dataIndex:'name'},{title:'拥有权限',dataIndex:'menus'},]\n    \n    render(){\n        const {roles, role, showStatus} = this.state\n        const title=(\n            <span>\n                <Button type='primary' onClick={()=>{this.setState({showStatus:1})}}>\n                    创建角色\n                </Button> &nbsp;\n                <Button type='primary' onClick={this.delRole} disabled={!role.name}>\n                    删除角色\n                </Button> &nbsp;\n                <Button type='primary' onClick={()=>{this.setState({showStatus:2})}} disabled={!role.name}>\n                    设置角色权限\n                </Button>\n            </span>\n        )\n        return(\n            <Card title={title}>\n                <Table bordered\n                    rowKey='name'\n                    dataSource={roles}\n                    columns={this.columns}\n                    rowSelection={{type: 'radio', selectedRowKeys: [role.name]}}\n                    onRow={this.onRow}\n                />\n                <AddForm showStatus={showStatus} addRole={(name)=>{this.updateRole(name)}}/>\n                <SetForm showStatus={showStatus} role={this.state.role} setRole={(name, menus)=>{this.updateRole(name, menus)}}/>\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}
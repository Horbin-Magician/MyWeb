{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import _classCallCheck from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"antd/es/tree/style\";import _Tree from\"antd/es/tree\";import React,{Component}from'react';import menuList from'../../../../../config/adminMenuConfig';/*\n管理-统计\n */import{jsx as _jsx}from\"react/jsx-runtime\";var TreeNode=_Tree.TreeNode;var AddForm=/*#__PURE__*/function(_Component){_inherits(AddForm,_Component);var _super=_createSuper(AddForm);function AddForm(props){var _this;_classCallCheck(this,AddForm);_this=_super.call(this,props);_this.setRole=function(){var newMenus='';if(_this.state.checkedKeys.length)newMenus=_this.state.checkedKeys.reduce(function(result,item){if(result==='all')return'';if(item==='all')return result;if(result==='')return item;return result+'/'+item;});_this.props.setRole(_this.props.role.name,newMenus);};_this.getMenuNodes=function(menuList){return menuList.map(function(item){if(!item.children){return/*#__PURE__*/_jsx(TreeNode,{title:item.title},item.key);}else{return/*#__PURE__*/_jsx(TreeNode,{title:item.title,children:_this.getMenuNodes(item.children)},item.key);}});};_this.onCheck=function(checkedKeys){_this.setState({checkedKeys:checkedKeys});};_this.state={checkedKeys:{}};_this.menuNodes=_this.getMenuNodes(menuList);return _this;}_createClass(AddForm,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(_Modal,{title:\"\\u8BBE\\u7F6E\\u89D2\\u8272\\u6743\\u9650\",visible:this.props.showStatus===2,onOk:this.setRole,onCancel:function onCancel(){_this2.props.setRole();},children:/*#__PURE__*/_jsx(_Tree,{checkable:true,defaultExpandAll:true,checkedKeys:this.state.checkedKeys,onCheck:this.onCheck,children:/*#__PURE__*/_jsx(TreeNode,{title:\"\\u5E73\\u53F0\\u6743\\u9650\",children:this.menuNodes},'all')})});}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.showStatus===0){var nextMenus=nextProps.role.menus?nextProps.role.menus.split('/'):{};if(nextMenus!==prevState.checkedKeys)return{checkedKeys:nextMenus};}return null;}}]);return AddForm;}(Component);export{AddForm as default};","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/authorityManage/components/setForm.jsx"],"names":["React","Component","menuList","TreeNode","AddForm","props","setRole","newMenus","state","checkedKeys","length","reduce","result","item","role","name","getMenuNodes","map","children","title","key","onCheck","setState","menuNodes","showStatus","nextProps","prevState","nextMenus","menus","split"],"mappings":"6tBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CAGA,MAAOC,CAAAA,QAAP,KAAqB,uCAArB,CACA;AACA;AACA,G,8CACOC,CAAAA,Q,OAAAA,Q,IAEcC,CAAAA,O,kGACjB,iBAAYC,KAAZ,CAAkB,yCACd,uBAAMA,KAAN,EADc,MAclBC,OAdkB,CAcR,UAAI,CACV,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAG,MAAKC,KAAL,CAAWC,WAAX,CAAuBC,MAA1B,CAAiCH,QAAQ,CAAG,MAAKC,KAAL,CAAWC,WAAX,CAAuBE,MAAvB,CACxC,SAACC,MAAD,CAASC,IAAT,CAAgB,CACZ,GAAGD,MAAM,GAAK,KAAd,CAAoB,MAAO,EAAP,CACpB,GAAGC,IAAI,GAAK,KAAZ,CAAkB,MAAOD,CAAAA,MAAP,CAClB,GAAGA,MAAM,GAAK,EAAd,CAAiB,MAAOC,CAAAA,IAAP,CACjB,MAAOD,CAAAA,MAAM,CAAG,GAAT,CAAeC,IAAtB,CACP,CAN2C,CAAX,CAOjC,MAAKR,KAAL,CAAWC,OAAX,CAAmB,MAAKD,KAAL,CAAWS,IAAX,CAAgBC,IAAnC,CAAyCR,QAAzC,EACH,CAxBiB,OA0BlBS,YA1BkB,CA0BH,SAACd,QAAD,CAAa,CACxB,MAAOA,CAAAA,QAAQ,CAACe,GAAT,CAAa,SAAAJ,IAAI,CAAI,CACxB,GAAG,CAACA,IAAI,CAACK,QAAT,CAAkB,CACd,mBAAO,KAAC,QAAD,EAAU,KAAK,CAAEL,IAAI,CAACM,KAAtB,EAAkCN,IAAI,CAACO,GAAvC,CAAP,CACH,CAFD,IAEK,CACD,mBACI,KAAC,QAAD,EAAyB,KAAK,CAAEP,IAAI,CAACM,KAArC,UACK,MAAKH,YAAL,CAAkBH,IAAI,CAACK,QAAvB,CADL,EAAeL,IAAI,CAACO,GAApB,CADJ,CAKH,CACJ,CAVM,CAAP,CAWH,CAtCiB,OAwClBC,OAxCkB,CAwCR,SAAAZ,WAAW,CAAI,CACrB,MAAKa,QAAL,CAAc,CAACb,WAAW,CAAXA,WAAD,CAAd,EACH,CA1CiB,CAEd,MAAKD,KAAL,CAAa,CAACC,WAAW,CAAE,EAAd,CAAb,CACA,MAAKc,SAAL,CAAiB,MAAKP,YAAL,CAAkBd,QAAlB,CAAjB,CAHc,aAIjB,C,0CAwCD,iBAAQ,iBACJ,mBACI,aAAO,KAAK,CAAC,sCAAb,CAAsB,OAAO,CAAE,KAAKG,KAAL,CAAWmB,UAAX,GAAwB,CAAvD,CACA,IAAI,CAAE,KAAKlB,OADX,CACoB,QAAQ,CAAE,mBAAI,CAAC,MAAI,CAACD,KAAL,CAAWC,OAAX,GAAqB,CADxD,uBAEI,YAAM,SAAS,KAAf,CAAgB,gBAAgB,CAAE,IAAlC,CACA,WAAW,CAAE,KAAKE,KAAL,CAAWC,WADxB,CAEA,OAAO,CAAE,KAAKY,OAFd,uBAGI,KAAC,QAAD,EAAU,KAAK,CAAC,0BAAhB,UACK,KAAKE,SADV,EAA2B,KAA3B,CAHJ,EAFJ,EADJ,CAYH,C,0CAnDD,kCAAgCE,SAAhC,CAA2CC,SAA3C,CAAqD,CACjD,GAAGD,SAAS,CAACD,UAAV,GAAyB,CAA5B,CAA8B,CAC1B,GAAMG,CAAAA,SAAS,CAAGF,SAAS,CAACX,IAAV,CAAec,KAAf,CAAuBH,SAAS,CAACX,IAAV,CAAec,KAAf,CAAqBC,KAArB,CAA2B,GAA3B,CAAvB,CAAyD,EAA3E,CACA,GAAGF,SAAS,GAAKD,SAAS,CAACjB,WAA3B,CAAuC,MAAM,CAACA,WAAW,CAACkB,SAAb,CAAN,CAC1C,CACD,MAAO,KAAP,CACH,C,qBAbgC1B,S,SAAhBG,O","sourcesContent":["import React, {Component} from 'react'\nimport {Modal, Tree} from 'antd'\n\nimport menuList from '../../../../../config/adminMenuConfig'\n/*\n管理-统计\n */\nconst {TreeNode} = Tree\n\nexport default class AddForm extends Component{\n    constructor(props){\n        super(props)\n        this.state = {checkedKeys: {}}\n        this.menuNodes = this.getMenuNodes(menuList)\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState){\n        if(nextProps.showStatus === 0){\n            const nextMenus = nextProps.role.menus ? nextProps.role.menus.split('/') : {}\n            if(nextMenus !== prevState.checkedKeys)return{checkedKeys:nextMenus}\n        }\n        return null\n    }\n\n    setRole = ()=>{\n        let newMenus = ''\n        if(this.state.checkedKeys.length)newMenus = this.state.checkedKeys.reduce(\n            (result, item)=>{\n                if(result === 'all')return ''\n                if(item === 'all')return result\n                if(result === '')return item\n                return(result + '/' + item)\n        })\n        this.props.setRole(this.props.role.name, newMenus)\n    }\n\n    getMenuNodes = (menuList) =>{\n        return menuList.map(item => {\n            if(!item.children){\n                return(<TreeNode title={item.title} key={item.key}></TreeNode>)\n            }else{\n                return(\n                    <TreeNode key={item.key} title={item.title}>\n                        {this.getMenuNodes(item.children)}\n                    </TreeNode>\n                )\n            }\n        })\n    }\n\n    onCheck = checkedKeys => {\n        this.setState({checkedKeys})\n    }\n\n    render(){\n        return(\n            <Modal title='设置角色权限' visible={this.props.showStatus===2} \n            onOk={this.setRole} onCancel={()=>{this.props.setRole()}}>\n                <Tree checkable defaultExpandAll={true} \n                checkedKeys={this.state.checkedKeys}\n                onCheck={this.onCheck}>\n                    <TreeNode title='平台权限' key='all'>\n                        {this.menuNodes}\n                    </TreeNode>\n                </Tree>\n            </Modal>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}
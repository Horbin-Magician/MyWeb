{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/authorityManage/authorityManage.jsx\";\nimport React, { Component } from 'react';\nimport AddForm from './components/addForm';\nimport { reqAuthorityList, reqAddAuthority, reqDelAuthority } from '../../../../api';\n/*\n管理-统计\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UserManage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      role: {},\n      //选中的role\n      showStatus: 0 //显示状态，0不显示modal,1显示添加modal，2显示设置modal\n\n    };\n\n    this.updateRole = () => {\n      reqAuthorityList().then(data => {\n        this.setState({\n          roles: data.data\n        });\n        console.log(data.data);\n      });\n    };\n\n    this.addRole = name => {\n      reqAddAuthority(name); //创建角色\n\n      _message.success('创建成功！');\n\n      this.props.update();\n      this.props.hide();\n    };\n\n    this.delRole = () => {\n      reqDelAuthority(this.state.role.name).then(data => {\n        if (data.status === '0') {\n          _message.success('删除角色成功！');\n\n          this.updateRole();\n        } else _message.error('删除角色失败！');\n      });\n    };\n\n    this.columns = [{\n      title: '角色名称',\n      dataIndex: 'name'\n    }];\n\n    this.onRow = role => {\n      return {\n        onClick: event => {\n          this.setState({\n            role\n          });\n        }\n      };\n    };\n  }\n\n  componentDidMount() {\n    this.updateRole();\n  }\n\n  render() {\n    const {\n      roles,\n      role,\n      showStatus\n    } = this.state;\n\n    const title = /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [/*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: () => {\n          this.setState({\n            showStatus: 1\n          });\n        },\n        children: \"\\u521B\\u5EFA\\u89D2\\u8272\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: this.delRole,\n        disabled: !role.name,\n        children: \"\\u5220\\u9664\\u89D2\\u8272\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: () => {\n          this.setState({\n            showStatus: 2\n          });\n        },\n        disabled: !role.name,\n        children: \"\\u8BBE\\u7F6E\\u89D2\\u8272\\u6743\\u9650\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(_Card, {\n      title: title,\n      children: [/*#__PURE__*/_jsxDEV(_Table, {\n        bordered: true,\n        rowKey: \"name\",\n        dataSource: roles,\n        columns: this.columns,\n        rowSelection: {\n          type: 'radio',\n          selectedRowKeys: [role.name]\n        },\n        onRow: this.onRow\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AddForm, {\n        showStatus: showStatus,\n        hide: () => {\n          this.setState({\n            showStatus: 0\n          });\n        },\n        update: this.updateRole\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/authorityManage/authorityManage.jsx"],"names":["React","Component","AddForm","reqAuthorityList","reqAddAuthority","reqDelAuthority","UserManage","state","role","showStatus","updateRole","then","data","setState","roles","console","log","addRole","name","success","props","update","hide","delRole","status","error","columns","title","dataIndex","onRow","onClick","event","componentDidMount","render","type","selectedRowKeys"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {Card, Button, Table, message} from 'antd'\n\nimport AddForm from './components/addForm'\nimport {reqAuthorityList, reqAddAuthority, reqDelAuthority} from '../../../../api'\n\n/*\n管理-统计\n */\nexport default class UserManage extends Component{\n    state = {\n        role: {}, //选中的role\n        showStatus:0, //显示状态，0不显示modal,1显示添加modal，2显示设置modal\n    }\n\n    componentDidMount(){\n        this.updateRole()\n    }\n\n    updateRole = () => {\n        reqAuthorityList().then(data =>{\n            this.setState({roles:data.data})\n            console.log(data.data)\n        })\n    }\n\n    addRole = (name) =>{\n        reqAddAuthority(name)//创建角色\n        message.success('创建成功！')\n        this.props.update()\n        this.props.hide()\n    }\n\n    delRole = () =>{\n        reqDelAuthority(this.state.role.name).then(data =>{\n            if(data.status === '0'){\n                message.success('删除角色成功！')\n                this.updateRole()\n            }\n            else message.error('删除角色失败！')\n        })\n    }\n\n    columns = [{title:'角色名称',dataIndex:'name'},]\n\n    onRow = (role) => {\n        return{\n            onClick: event =>{\n                this.setState({role})\n            }\n        }\n    }\n\n    render(){\n        const {roles, role, showStatus} = this.state\n        const title=(\n            <span>\n                <Button type='primary' onClick={()=>{this.setState({showStatus:1})}}>\n                    创建角色\n                </Button> &nbsp;\n                <Button type='primary' onClick={this.delRole} disabled={!role.name}>\n                    删除角色\n                </Button> &nbsp;\n                <Button type='primary' onClick={()=>{this.setState({showStatus:2})}} disabled={!role.name}>\n                    设置角色权限\n                </Button>\n            </span>\n        )\n        return(\n            <Card title={title}>\n                <Table bordered\n                    rowKey='name'\n                    dataSource={roles}\n                    columns={this.columns}\n                    rowSelection={{type: 'radio', selectedRowKeys: [role.name]}}\n                    onRow={this.onRow}\n                />\n                <AddForm showStatus={showStatus} hide={()=>{this.setState({showStatus:0})}} update={this.updateRole}/>\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}
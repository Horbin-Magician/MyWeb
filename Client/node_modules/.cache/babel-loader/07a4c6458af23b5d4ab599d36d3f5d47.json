{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import\"antd/es/message/style\";import _message from\"antd/es/message\";import _classCallCheck from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/horbin/Project/Web/my-web/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"antd/es/select/style\";import _Select from\"antd/es/select\";import React,{Component}from'react';import{reqAuthorityList}from'../../../../../api';/*\n管理-统计\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=_Select.Option;var AddForm=/*#__PURE__*/function(_Component){_inherits(AddForm,_Component);var _super=_createSuper(AddForm);function AddForm(props){var _this;_classCallCheck(this,AddForm);_this=_super.call(this,props);_this.formRef=/*#__PURE__*/React.createRef();_this.setUser=function(){_this.formRef.current.validateFields().then(function(values){_this.formRef.current.resetFields();if(!values.password)values.password='';_this.props.setUser(values.username,values.password,values.authority);}).catch(function(info){return _message.error('请正确填写信息！'+info);});};_this.getOptions=function(authorityList){return authorityList.map(function(item){return/*#__PURE__*/_jsx(Option,{value:item.name,children:item.name},item.name);});};_this.state={};reqAuthorityList().then(function(data){_this.setState({options:_this.getOptions(data.data)});});return _this;}_createClass(AddForm,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.formRef.current){this.formRef.current.resetFields();this.formRef.current.setFieldsValue({username:this.props.user.username});this.formRef.current.setFieldsValue({authority:this.props.user.authority});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(_Modal,{title:\"\\u6DFB\\u52A0\\u7528\\u6237\",visible:this.props.showStatus===2,onOk:this.setUser,onCancel:function onCancel(){_this2.props.setUser();},children:/*#__PURE__*/_jsxs(_Form,{ref:this.formRef,children:[/*#__PURE__*/_jsx(_Form.Item,{name:\"username\",children:/*#__PURE__*/_jsx(_Input,{disabled:true})}),/*#__PURE__*/_jsx(_Form.Item,{name:\"password\",rules:[{min:6,message:'密码最少6位'},{max:16,message:'密码最多16位'},{pattern:/^[a-zA-z0-9_*!]+$/,message:'密码必须由英文、数字或英文字符_*!组成'}],children:/*#__PURE__*/_jsx(_Input,{type:\"password\",placeholder:\"\\u5BC6\\u7801\\u9ED8\\u8BA4\\u4E0D\\u4FEE\\u6539\"})}),/*#__PURE__*/_jsx(_Form.Item,{name:\"authority\",children:/*#__PURE__*/_jsx(_Select,{children:this.state.options})})]})});}}]);return AddForm;}(Component);export{AddForm as default};","map":{"version":3,"sources":["/home/horbin/Project/Web/my-web/Client/src/pages/admin/manages/userManage/components/setForm.jsx"],"names":["React","Component","reqAuthorityList","Option","AddForm","props","formRef","createRef","setUser","current","validateFields","then","values","resetFields","password","username","authority","catch","info","error","getOptions","authorityList","map","item","name","state","data","setState","options","setFieldsValue","user","showStatus","min","message","max","pattern"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {Modal, Form, Input, Select,message} from 'antd'\n\nimport {reqAuthorityList} from '../../../../../api'\n/*\n管理-统计\n */\nconst { Option } = Select;\n\nexport default class AddForm extends Component{\n    constructor(props){\n        super(props)\n        this.state = {}\n        reqAuthorityList().then(data => {\n            this.setState({options : this.getOptions(data.data)})\n        })\n    }\n\n    formRef = React.createRef()\n\n    setUser = ()=>{\n        this.formRef.current.validateFields().then(values => {\n            this.formRef.current.resetFields()\n            if(!values.password)values.password = ''\n            this.props.setUser(values.username, values.password, values.authority)\n        })\n        .catch(info => message.error('请正确填写信息！' + info));\n    }\n\n    getOptions = (authorityList) =>{\n        return authorityList.map(item => {\n            return <Option key={item.name} value={item.name}>{item.name}</Option>\n        })\n    }\n\n    componentDidUpdate(){\n        if(this.formRef.current){\n            this.formRef.current.resetFields()\n            this.formRef.current.setFieldsValue({username:this.props.user.username})\n            this.formRef.current.setFieldsValue({authority:this.props.user.authority})\n        }\n    }\n\n    render(){\n        return(\n            <Modal title='添加用户' visible={this.props.showStatus===2} \n                onOk={this.setUser} onCancel={()=>{this.props.setUser()}}\n            >\n                <Form ref={this.formRef}>\n                    <Form.Item name=\"username\">\n                        <Input disabled={true}/>\n                    </Form.Item>\n                    <Form.Item name=\"password\"\n                    rules={[\n                        {min: 6,message: '密码最少6位'},\n                        {max: 16,message: '密码最多16位'},\n                        {pattern: /^[a-zA-z0-9_*!]+$/,message: '密码必须由英文、数字或英文字符_*!组成'},\n                    ]}\n                    >\n                        <Input type=\"password\" placeholder=\"密码默认不修改\"/>\n                    </Form.Item>\n                    <Form.Item name=\"authority\">\n                        <Select>{this.state.options}</Select>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}